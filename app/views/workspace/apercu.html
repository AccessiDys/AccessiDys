<!-- 
 File: apercu.html
 * Copyright (c) 2013-2016
 * Centre National d’Enseignement à Distance (Cned), Boulevard Nicephore Niepce, 86360 CHASSENEUIL-DU-POITOU, France
 * (direction-innovation@cned.fr)
 *
 * GNU Affero General Public License (AGPL) version 3.0 or later version
 *
 * This file is part of a program which is free software: you can
 * redistribute it and/or modify it under the terms of the
 * GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public
 * License along with this program.
 * If not, see <http://www.gnu.org/licenses/>.
 -->

<div class="alert-block alert-success alert-dismissable" id="overview-success-toaster">
    <i class="fa fa-check" aria-hidden="true"></i>

    <strong regle-style="toasterMsg"
            apply-rules="forceToasterApdapt"
            tags="listTagsByProfilToaster">
    </strong>
</div>

<div class="alert-block alert-danger alert-dismissable" id="overview-error-toaster">
    <i class="fa fa-times" aria-hidden="true"></i>

    <strong regle-style="toasterMsg"
            apply-rules="forceToasterApdapt"
            tags="listTagsByProfilToaster">
    </strong>
</div>

<h1 id="titreDocumentApercu" data-ng-if="titreDoc" class="dark_green animated fadeInLeft">{{titreDoc}}</h1>
<div class="content" id="offlineSynthesisTips" ng-show="displayOfflineSynthesisTips">
    <div class="tutorial_area animated fadeInDown">
        <div class="tutorial_container">
            <button class="close_tuto" ng-click="closeOfflineSynthesisTips()"></button>
            <div class="tutorial_content clearfix">
                <div class="tutorial_symbol">
                    <img src="/styles/images/lamp_tuto.png" alt=""/>
                </div>
                <div class="tutorial_desc">
                    <h3>Astuce</h3>
                    <p class="tutorial_text">
                        En mode déconnecté, la voix utilisée est fournie par votre système d'exploitation.
                        <br/> Vous pouvez installer de nouvelles voix sur Windows en suivant les instructions
                        disponibles <a href="http://www.nvda-fr.org/voix.php">ici</a>.
                    </p>
                    <div class="hide_tuto_container clearfix">
                        <p class="information_workspace controls_zone checkbox_zone">
                            <input type="checkbox" class="hidden" name="informationOfflineSynthesisTips"
                                   id="informationOfflineSynthesisTips" data-ng-model="neverShowOfflineSynthesisTips"/>
                            <label class="mask" for="informationOfflineSynthesisTips">&nbsp;</label>
                            <label class="hide_tuto_check" for="informationOfflineSynthesisTips">Ne plus afficher ce
                                message</label>
                        </p>
                        <button class="hide_tuto_btn btn_simple light_blue" ng-click="closeOfflineSynthesisTips()">OK
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="content" id="browserNotSupportedDialog" ng-show="displayBrowserNotSupported">
    <div class="information_dialog_area animated fadeInDown">
        <div class="information_dialog_container">
            <button class="information_dialog_close" ng-click="closeBrowserNotSupported()"></button>
            <div class="information_dialog_content clearfix">
                <div class="information_dialog_desc">
                    <h3>Information</h3>
                    <p class="information_dialog_text">
                        La lecture vocale ne fonctionne pas avec votre navigateur.
                        <br/> Elle fonctionne notamment avec Google Chrome.
                    </p>
                    <div class="hide_information_dialog_container clearfix">
                        <p class="information_dialog_controls controls_zone checkbox_zone">
                            <input type="checkbox" class="hidden" name="informationNeverShowBrowserNotSupported"
                                   id="informationNeverShowBrowserNotSupported"
                                   data-ng-model="neverShowBrowserNotSupported"/>
                            <label class="mask" for="informationNeverShowBrowserNotSupported">&nbsp;</label>
                            <label class="hide_information_dialog_check " for="informationNeverShowBrowserNotSupported">Ne
                                plus afficher ce message</label>
                        </p>
                        <button class="hide_information_dialog_btn btn_simple light_blue"
                                ng-click="closeBrowserNotSupported()">OK
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="content" id="noAudioRightsDialog" ng-show="displayNoAudioRights">
    <div class="information_dialog_area animated fadeInDown">
        <div class="information_dialog_container">
            <button class="information_dialog_close" ng-click="closeNoAudioRights()"></button>
            <div class="information_dialog_content clearfix">
                <div class="information_dialog_desc">
                    <h3>Information</h3>
                    <p class="information_dialog_text">
                        La synthèse vocale est désactivée.
                        <br/> Pour l'activer, veuillez contacter l'administrateur de l'application.
                    </p>
                    <div class="hide_information_dialog_container clearfix">
                        <p class="information_dialog_controls controls_zone checkbox_zone">
                            <input type="checkbox" class="hidden" name="informationNeverShowNoAudioRights"
                                   id="informationNeverShowNoAudioRights" data-ng-model="neverShowNoAudioRights"/>
                            <label class="mask" for="informationNeverShowNoAudioRights">&nbsp;</label>
                            <label class="hide_information_dialog_check " for="informationNeverShowNoAudioRights">Ne
                                plus afficher ce message</label>
                        </p>
                        <button class="hide_information_dialog_btn btn_simple light_blue"
                                ng-click="closeNoAudioRights()">OK
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Pagination -->
<nav class="navbar navbar-default container-fluid navbar-pagination navbar-pagination-top"
     data-ng-show="!modeImpression">
    <div>
        <form class="navbar-form navbar-center " role="search">
            <div class="form-group col-md-4 col-md-offset-2">
                <div class="input-group">
                    <div class="input-group-addon">Aller à la page:</div>
                    <input id='numeroPage' type="number" min="0" max="{{content.length}}" class="form-control"
                           placeholder="Numéro.." data-ng-model="numeroPageRechercher" required=""> <span
                        class="input-group-btn">
						<button class="btn btn-default" type="button" title="Ouvrir la page"
                                data-ng-click="setPage(numeroPageRechercher)">OK</button>
					</span>
                </div>
            </div>
        </form>
        <ul class="pagination pagination-md col-md-2">
            <li data-ng-class="{'disabled': currentPage <= 1}">
                <a data-ng-click="premier()" title="Premier">
                    <i class="fa fa-fast-backward" aria-hidden="true"></i>
                </a>
            </li>
            <li data-ng-class="{'disabled': currentPage <= 1}">
                <a data-ng-click="precedent()" title="Précedent">
                    <i class="fa fa-step-backward" aria-hidden="true"></i>
                </a>
            </li>
            <li data-ng-class="{'disabled': currentPage >= (content.length - 1)}">
                <a data-ng-click="suivant()" title="Suivant">
                    <i class="fa fa-step-forward" aria-hidden="true"></i>
                </a>
            </li>
            <li data-ng-class="{'disabled': currentPage >= (content.length - 1)}">
                <a data-ng-click="dernier()" title="Dernier">
                    <i class="fa fa-fast-forward" aria-hidden="true"></i>
                </a>
            </li>
        </ul>

        <p data-ng-if="content.length > 0" class="pagination-number col-md-2"> {{currentPage}} / {{(content.length -
            1)}}</p>
    </div>
</nav>

<div class="content">
    <div class="doc-apercu" body-classes="" document-methodes="">
        <div class="modal fade" id="duplicateDocModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog" id="modalContent">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-ng-click="clearDupliquerDocument()"
                                data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h3 class="modal-title" id="myModalLabel">Dupliquer le
                            document</h3>
                    </div>
                    <div class="alert alert-success" data-ng-if="showMsgSuccess">{{msgSuccess}}</div>
                    <div class="alert-block alert-danger" data-ng-if="showMsgError">{{msgErrorModal}}</div>
                    <div class="modal-body adjust-modal-body">
                        <div class="row-fluid span6">
                            <div class="tab-content">
                                <div class="tab-pane active" id="document" data-ng-form="AjoutformValidation">
                                    <form class="form-horizontal" role="form" id="duplicateDoc" name="duplicateDoc">
                                        <fieldset>
                                            <p class="controls_zone" data-ng-if="!showMsgSuccess">
                                                Vous n'êtes pas le propriétaire de ce document, voulez-vous le dupliquer
                                                dans votre Dropbox?</p>
                                            <p class="controls_zone" data-ng-if="!showMsgSuccess">
                                                <label for="duplDocTitre" class=""><span>Titre
														du document</span> <span class="required">*</span></label>
                                                <input type="text" max-length="32" class="" id="duplDocTitre"
                                                       placeholder="Entrez le titre du document"
                                                       data-ng-model="duplDocTitre" data-ng-change="ete()" required>
                                            </p>
                                        </fieldset>
                                        <div class="centering" id="ProfileButtons" data-ng-if="!showMsgSuccess">
                                            <button type="button" class="reset_btn"
                                                    data-ng-click="clearDupliquerDocument()" title="Annuler">Annuler
                                            </button>
                                            <button id="duplDocButton" type="button" class="btn_simple light_blue"
                                                    data-ng-click="dupliquerDocument()" data-dismiss="" title="Oui">Oui
                                            </button>
                                        </div>
                                        <div class="centering" id="ProfileButtons" data-ng-if="showMsgSuccess">
                                            <button type="button" class="reset_btn"
                                                    data-ng-click="clearDupliquerDocument()" title="Ok">Ok
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-ng-click="clearSocialShare()" data-dismiss="modal"
                                aria-hidden="true">&times;</button>
                        <h3 class="modal-title" id="myModalLabel">Partager ce
                            document</h3>
                    </div>
                    <div class="modal-body" data-ng-hide="confirme">
                        <h2>Avez-vous le droit de partager ce document ?</h2>
                        <p class="info_txt shareConfirme">Les droits des auteurs doivent être protégés. Ainsi, en France
                            comme dans de nombreux pays, la loi interdit généralement de partager un document sans la
                            permission de ses auteurs. C’est pourquoi les auteurs qui désirent autoriser voire
                            encourager le partage le signalent généralement dans leur œuvre en précisant que celle-ci
                            est distribuée sous une licence libre ‘Creative Commons’. Sans ces permissions ou ce type de
                            licence, le partage est strictement interdit. C’est pourquoi nous vous demandons de vérifier
                            précisément vos droits au partage et de renoncer à cette liberté tant que les auteurs et la
                            loi vous en privent. Par ailleurs, les droits des personnes handicapées doivent également
                            être protégés. Ainsi, en France comme dans de nombreux pays, la loi oblige la collectivité
                            nationale à être solidaire avec les personnes handicapées. En particulier, la loi autorise à
                            partager tout document avec une personne lourdement handicapée, même sans la permission des
                            auteurs, à condition de disposer d’un agrément ministériel spécifique. Avant de partager un
                            document, il vous faut donc vérifier minutieusement que vous avez bien le droit de le
                            partager. Est-ce bien le cas ?</p>
                        <div data-ng-show="addAnnotation" class="controls_zone checkbox_zone share_annotation">
                            <input type="checkbox" class="hidden ng-valid ng-dirty" name="partager_annotation"
                                   id="partager_annotation" data-ng-model="annotationOk">
                            <label class="mask" for="partager_annotation">&nbsp;</label>
                            <label for="partager_annotation">Partager les annotations .</label>
                        </div>
                        <div class="centering with_border" id="ProfileButtons">
                            <button type="button" class="reset_btn" data-dismiss="modal"
                                    style="padding: 8px 5px 4px; width: auto;"
                                    title="Non, je n’ai pas le droit de partager">Non, je n’ai pas le droit de partager
                            </button>
                            <button type="button" class="btn_simple light_blue" data-ng-click="processAnnotation()"
                                    title="Oui, j’ai le droit de partager">Oui, j’ai le droit de partager
                            </button>
                        </div>
                    </div>
                    <div class="modal-body" data-ng-hide="!confirme">
                        <h2>
                            <span>Sélectionner un moyen pour partager ce document</span>
                        </h2>
                        <form class="form-horizontal" role="form" id="socialShare1" name="socialShare1">
                            <div class="share_btn_container">
                                <ul>
                                    <li>
                                        <a href="" class="share_btn mail_share" data-ng-click="loadMail()" title="Email"
                                           id="document_share"></a><span class="share-text">Par Email</span></li>
                                    <li class="facebook-share"><span class="share-text">Sur
											Facebook</span></li>
                                    <li>
                                        <a class="share_link share_btn twitter_share"
                                           href="https://twitter.com/share?url={{encodeURI}}&via=Accessidys&text=Un élément a été partagé via l'outil Accessidys"
                                           onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');return false;"
                                           target="_blank" title="Partager sur Twitter"> </a><span class="share-text">Sur Twitter</span>
                                    </li>
                                    <li class="google-share">
                                        <button id="google-share" class="share_link share_btn gplus_share"
                                                title="Partager sur Google+"></button>
                                        <span class="share-text">Sur Google+</span></li>
                                </ul>
                            </div>
                            <div class="control_group" data-ng-show="showDestination">
                                <div class="alert alert-success" data-ng-if="emailMsgSuccess">{{emailMsgSuccess}}</div>
                                <div class="alert-block alert-danger" data-ng-show="emailMsgError">{{emailMsgError}}
                                </div>
                                <h2>
                                    adresse email <br> <span>Saisissez l’adresse email
										du destinataire</span>
                                </h2>
                                <p class="mail_area">
                                    <label for="destinataire" class="email" id="label_email_etap-one">Email</label>
                                    <input type="text" class="" data-ng-model="destinataire" id="destinataire"/>
                                </p>
                            </div>

                            <div class="centering" id="ProfileButtons">
                                <button type="button" class="reset_btn" data-ng-click="clearSocialShare()"
                                        data-dismiss="modal" title="Annuler">Annuler
                                </button>
                                <button type="button" class="btn_simple light_blue" data-ng-click="socialShare()"
                                        data-ng-if="showDestination" title="Partager">Partager
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>


        <div class="modal fade" id="apercuModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-ng-click="clearSocialShare()" data-dismiss="modal"
                                aria-hidden="true">&times;</button>
                        <h3 class="modal-title" id="myModalLabel">Partager ce
                            document</h3>
                    </div>
                    <div class="modal-body" data-ng-hide="!confirme">
                        <h2>
                            <span>Aperçu Temporaire</span>
                        </h2>

                        <div class="alert-block alert-danger">Cette fonctionnalité est desactivée en mode aperçu.</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="AnnotationModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog" id="modalContent">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-ng-click="" data-dismiss="modal"
                                aria-hidden="true">&times;</button>
                        <h3 class="modal-title" id="myModalLabel">Annotation partagée</h3>
                    </div>
                    <div class="modal-body adjust-modal-body">
                        <div class="info_txt">
                            <p class="text_left ajustPadding_bottom">ce document a été partagé avec les annotations du
                                propriétaire voulez-vous les appliquer ?</p>
                        </div>
                    </div>
                    <div class="centering">
                        <button type="button" class="reset_btn" data-ng-click="" data-dismiss="modal" title="Annuler">Ne
                            pas appliquer
                        </button>
                        <button type="button" class="btn_simple light_blue" data-ng-click="applySharedAnnotation()"
                                title="Envoyer">Accepter
                        </button>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
            <!-- /.modal -->
        </div>
        <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog" id="modalContent">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-ng-click="" data-dismiss="modal"
                                aria-hidden="true">&times;</button>
                        <h3 class="modal-title" id="myModalLabel">Confirmation
                            d'envoi</h3>
                    </div>
                    <div class="modal-body adjust-modal-body">
                        <div class="info_txt">
                            <p class="text_left ajustPadding_bottom">Voulez-vous envoyer cet email ?</p>
                        </div>
                    </div>
                    <div class="centering" id="confirmationButtons">
                        <button type="button" data-ng-click="dismissConfirm()" class="reset_btn" data-ng-click=""
                                data-dismiss="modal" title="Annuler">Annuler
                        </button>
                        <button type="button" class="btn_simple light_blue" data-ng-click="sendMail()" title="Envoyer">
                            Envoyer
                        </button>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
            <!-- /.modal -->
        </div>
        <div class="modal fade" id="printModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-ng-click="clearPrint()" data-dismiss="modal"
                                aria-hidden="true">&times;</button>
                        <h3 class="modal-title" id="myModalLabel">Imprimer le
                            document</h3>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal" role="form" id="printDoc" name="printDoc">
                            <div class="info_txt">
                                <p class="text_left">Sélectionner un mode d'impression pour ce document</p>
                                <div class="control_group">
                                    <div data-ng-init="printMode=0">
                                        <p class="controls_zone">
                                            <input type="radio" id="all_pages" name="select_pages" class="hidden"
                                                   data-ng-model="printMode" data-ng-value="0">
                                            <label class="mask" for="all_pages">&nbsp;</label>
                                            <label for="all_pages">Toutes les pages</label>
                                        </p>
                                        <p class="controls_zone">
                                            <input type="radio" id="current_pages" name="select_pages" class="hidden"
                                                   data-ng-model="printMode" data-ng-value="1">
                                            <label class="mask" for="current_pages">&nbsp;</label>
                                            <label for="current_pages">Page actuelle</label>
                                        </p>
                                        <p class="controls_zone">
                                            <input type="radio" id="specific_pages" name="select_pages" class="hidden"
                                                   data-ng-model="printMode" data-ng-value="2"
                                                   data-ng-click="selectionnerMultiPage()">
                                            <label class="mask" for="specific_pages">&nbsp;</label>
                                            <label for="specific_pages">Sélection</label> <span
                                                data-ng-if="printMode == 2" class="num_pages"> <br/>
												<br/> De <select sselect id="pages_start_from"
                                                                 data-ng-model="pageDe"
                                                                 data-ng-change="selectionnerPageDe()">
													<option data-ng-repeat="page in content" value="{{$index}}">{{$index}}</option>
											</select> A <select sselect id="pages_end_width" data-ng-model="pageA"
                                                                data-ng-change="selectionnerPageDe()">
													<option data-ng-repeat="page in content" value="{{$index}}">{{$index}}</option>
											</select>
											</span>
                                        </p>
                                        <p class="controls_zone">
                                            <input type="checkbox" id="print_plan" name="print_plan" class="hidden"
                                                   data-ng-model="printPlan">
                                            <label class="mask" for="print_plan">&nbsp;</label>
                                            <label for="print_plan">Imprimer le plan</label>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="centering" id="ProfileButtons">
                                <button type="button" class="reset_btn" data-dismiss="modal" title="Annuler"
                                        data-ng-click="clearPrint()">Annuler
                                </button>
                                <button type="button" class="btn_simple light_blue" data-ng-click="printByMode()"
                                        title="Imprimer">Imprimer
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div>
            <div class="alert-block alert-success" id="okEmail" data-ng-if="envoiMailOk">
                Email envoyé avec succès !
            </div>


            <carousel id="carouselid" interval="myInterval" class="slider">
                <div id="virtualEditor" data-ng-show="false" style="display: none;" contenteditable="true"
                     class="ng-hide"></div>


                <div data-ng-if="!modeImpression"
                     class="row"
                     style="padding-left: 30px; padding-right: 60px;">
                    <!-- ADAPT CONTENT CONSULTATION-->
                    <div data-ng-class="{'col-xs-8': notes.length > 0 || isEnableNoteAdd, 'col-xs-12': notes.length < 1 && !isEnableNoteAdd}"
                         style="margin-top: 15px; outline: none !important;">

                        <div id="canvas-container-{{currentPage}}" class="canvas-container" style="z-index: 0;"></div>
                        <!-- Text -->
                        <div id="{{'adapt-content-' + currentPage }}"
                             tabindex="0" ng-mouseup="speak();"
                             ng-dblclick="speak();"
                             ng-keyup="speakOnKeyboard($event)"
                             regle-style="currentContent"
                             tags="listTagsByProfil"
                             apply-rules="forceApplyRules"
                             class="resetAll doc-apercu"
                             data-ng-click="checkLinkOffline($event);addNoteOnClick($event)"
                             data-show-loader="showAdaptationLoader()" data-hide-loader="hideLoader()"
                             data-set-active="setActive"
                             data-ng-class="{'border-grey-right': notes.length > 0 || isEnableNoteAdd}"
                             style="outline: none !important; z-index: 1; position: relative;">
                        </div>

                        <!-- Note link -->
                        <div data-ng-repeat="note in notes" data-ng-if="notes.length > 0">

                            <!-- the note on the right side -->
                            <table class="zoneID" id="zone-id-{{note.idNote}}" draggable-note
                                   container="{{'adapt-content-' + currentPage }}" type="content" style="z-index: 9"
                                   ng-if="currentPage == note.idPage">
                                <tr>
                                    <td width="23" class="delete_note" data-ng-click="removeNote(note)">&nbsp;</td>
                                    <td id="editTexteID" class="annotation_area closed locked">
                                        <div id="draggable-note-content" contenteditable="true"
                                             data-ng-paste="setPasteNote($event)"
                                             data-ng-focus="prepareNote(note, $event)"
                                             data-ng-blur="autoSaveNote(note, $event)" regle-style="note.styleNote"
                                             ng-bind-html="note.texte"></div>
                                    </td>
                                    <td class="collapse_btn">
                                        <button class="collapse_note" data-ng-click="collapse($event)"
                                                title="Réduire/Agrandir"></button>
                                    </td>
                                    <td id="note-id-{{note.idNote}}" class="drag_note">&nbsp;</td>
                                </tr>
                            </table>

                            <!-- little bubble on the left side -->
                            <div class="has_note" id="link-id-{{note.idNote}}"
                                 draggable-note
                                 type="link"
                                 container="{{'adapt-content-' + currentPage }}"
                                 data-ng-if="currentPage == note.idPage"></div>
                        </div>
                    </div>
                </div>

                <!-- end adapt content CONSULTATION-->
                <!-- ADAPT CONTENT IMPRESSION-->
                <div data-ng-if="modeImpression" class="row"
                     style="padding-left: 30px; padding-right: 60px;">
                    <div data-ng-class="{'col-xs-8': notes.length > 0 || isEnableNoteAdd, 'col-xs-12': notes.length < 1 && !isEnableNoteAdd}"
                         style="margin-top: 15px; outline: none !important;"
                         data-ng-repeat="(pageIndex, page) in content track by $index">

                        <div id="canvas-container-{{$index}}" class="canvas-container" style="z-index: 0;"></div>

                        <div id="{{'adapt-content-' + $index }}" tabindex="0"
                             ng-mouseup="speak();" ng-dblclick="speak();" ng-keyup="speakOnKeyboard($event)"
                             regle-style="page" tags="listTagsByProfil" apply-rules="forceApplyRules"
                             class="resetAll doc-apercu"
                             style="outline: none !important; z-index: 1; position: relative;"
                             data-ng-click="checkLinkOffline($event);addNoteOnClick($event,$index)"
                             data-show-loader="showAdaptationLoaderFromLoop($index)"
                             data-hide-loader="hideAdaptationLoaderFromLoop($index, content.length)"
                             data-ng-class="{'border-grey-right': notes.length > 0 || isEnableNoteAdd}"
                             data-set-active="setActive"
                             data-ng-show="$index != 0 || ( $index == 0 && isSummaryActive)">
                        </div>

                        <!-- Note link -->
                        <div data-ng-repeat="note in notes" data-ng-if="notes.length > 0">

                            <!-- the note on the right side -->
                            <table class="zoneID" id="zone-id-{{note.idNote}}" draggable-note visible="pageIndex == note.idPage && (pageIndex != 0 || ( pageIndex == 0 && isSummaryActive))"
                                   container="{{'adapt-content-' + pageIndex }}" type="content" style="z-index: 9"
                                   ng-if="pageIndex == note.idPage && (pageIndex != 0 || ( pageIndex == 0 && isSummaryActive))">
                                <tr>
                                    <td width="23" class="delete_note" data-ng-click="removeNote(note)">&nbsp;</td>
                                    <td id="editTexteID" class="annotation_area closed locked">
                                        <div id="draggable-note-content" contenteditable="true"
                                             data-ng-paste="setPasteNote($event)"
                                             data-ng-focus="prepareNote(note, $event)"
                                             data-ng-blur="autoSaveNote(note, $event)" regle-style="note.styleNote"
                                             ng-bind-html="note.texte"></div>
                                    </td>
                                    <td class="collapse_btn">
                                        <button class="collapse_note" data-ng-click="collapse($event)"
                                                title="Réduire/Agrandir"></button>
                                    </td>
                                    <td id="note-id-{{note.idNote}}" class="drag_note">&nbsp;</td>
                                </tr>
                            </table>

                            <!-- little bubble on the left side -->
                            <div class="has_note" id="link-id-{{note.idNote}}"
                                 draggable-note
                                 type="link"
                                 container="{{'adapt-content-' + pageIndex }}"
                                 data-ng-if="pageIndex == note.idPage && (pageIndex != 0 || ( pageIndex == 0 && isSummaryActive))"></div>
                        </div>
                    </div>
                </div>
                <!-- end adapt content IMPRESSION-->


                <div class="fixed_menu">
                    <div class="menu_wrapper" ng-init="activeItem = ''">
                        <button data-ng-click="afficherMenu()" type="button" class="open_menu"
                                title="Navigation documents">Navigation documents
                        </button>
                        <ul>
                            <li class="active">
                                <a href data-ng-if="modeImpression"
                                   data-ng-click="switchModeAffichage();" title="Mode page">
                                    <i class="fa fa-file-text-o" aria-hidden="true"></i>
                                    Mode Page
                                </a>

                                <a href data-ng-if="!modeImpression"
                                   data-ng-click="switchModeAffichage();" title="Mode lecture">
                                    <i class="fa fa-book" aria-hidden="true"></i>
                                    Mode lecture
                                </a>
                            </li>
                            <li data-ng-class="{'active': isSummaryActive}">

                                <a href data-ng-click="plan()" title="Sommaire">
                                    <i class="fa fa-home" aria-hidden="true"></i>
                                    Sommaire
                                </a>
                            </li>
                            <li ng-class="{'active' : isEnableNoteAdd}">

                                <a href data-ng-click="disableNoteAdd()" data-ng-show="idDocument && isEnableNoteAdd"
                                   title="Désactiver annotation">
                                    <i class="fa fa-commenting-o" aria-hidden="true"></i>
                                    Désactiver annotation
                                </a>

                                <a href data-ng-click="enableNoteAdd()" data-ng-show="idDocument && !isEnableNoteAdd"
                                   title="Ajouter annotation">
                                    <i class="fa fa-commenting-o" aria-hidden="true"></i>
                                    Ajouter annotation
                                </a>
                            </li>
                            <li class="devider"></li>
                            <li>
                                <a href data-ng-if="showEditer" title="Ouvrir un document"
                                   data-ng-click="openDocumentListModal()">
                                    <i class="fa fa-folder-open" aria-hidden="true"></i>
                                    Ouvrir un document
                                </a>
                            </li>
                            <li>
                                <a href data-ng-click="resizeApercu()" title="{{resizeDocApercu}}">
                                    <i class="glyphicon"
                                       data-ng-class="{'glyphicon-resize-full': resizeDocApercu === 'Agrandir', 'glyphicon-resize-small': resizeDocApercu === 'Réduire'}"
                                       aria-hidden="true"></i>
                                    {{resizeDocApercu}}
                                </a>
                            </li>
                            <li data-ng-if="showDuplDocModal">
                                <a href class="upload copy" data-toggle="modal"
                                   data-ng-show="idDocument"
                                   data-target="#duplicateDocModal" title="Copier">
                                    Copier
                                </a>
                            </li>
                            <li>
                                <a href data-ng-if="showSave" data-ng-click="saveWebDocument()"
                                   title="{{'Enregistrer' | translate}}">
                                    <i class="fa fa-floppy-o" aria-hidden="true"></i>
                                    {{'Enregistrer' | translate}}
                                </a>
                            </li>
                            <li data-ng-if="showSave">
                                <a href data-ng-click="openEditDocument()" title="Modifier">
                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                    Modifier
                                </a>
                            </li>
                            <li data-ng-if="showEditer">
                                <a href data-ng-click="editer()" title="Modifier">
                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                    Modifier
                                </a>
                            </li>
                            <li data-ng-if="showPartagerModal">
                                <a href data-ng-show="idDocument"
                                   data-ng-click="clearSocialShare();docPartage()" title="Partager">
                                    <i class="fa fa-share-alt" aria-hidden="true"></i>
                                    Partager
                                </a>
                            </li>
                            <li>
                                <a href data-toggle="modal" data-ng-show="!tmp"
                                   data-target="#printModal" title="Imprimer">
                                    <i class="fa fa-print" aria-hidden="true"></i>
                                    Imprimer
                                </a>
                            </li>

                            <li class="help">
                                <a href title="Aide synthèse vocale"
                                   data-ng-click="openVocalHelpModal()">
                                    <i class="fa fa-volume-up" aria-hidden="true"></i>
                                    Aide synthèse vocale</a>
                            </li>

                            <li>
                                <a href data-ng-click="fermerApercu()" title="{{'Fermer' | translate}}">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                    Fermer
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>
            </carousel>
        </div>
    </div>
    <div data-ng-if="showloaderProgress" class="loader_cover">
        <div id="loader_container">
            <div class="loader_bar">
                <div class="progress_bar" style="width: {{loaderProgress}};">&nbsp;
                </div>
            </div>
            <p class="loader_txt">
                {{loaderMessage}} <img src="/styles/images/loader_points.gif" alt="loader"/>
            </p>
        </div>
    </div>
    <div class="fixed_loader" data-ng-if="loader">
        <div class="loadre_container">
            <p class="loader_txt">{{loaderMsg}}</p>
        </div>
    </div>
</div>

<!-- Modal in case of technical error-->
<div class="modal fade in" id="technicalErrorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog bigger">
        <div class="modal-content">
            <div class="modal-header">
                <!-- <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button> -->
                <h4 class="modal-title light_bluehead" id="myModalLabel">Erreur
                    technique</h4>
            </div>
            <div class="modal-body adjust-modal-body">
                <p class="modal_content-text">L'import du document a échoué. Une erreur technique est survenue.</p>
            </div>
            <div class="centering">
                <button type="button" class="btn_simple light_blue much_padding" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>
<!-- Pagination -->
<nav class="navbar navbar-default container-fluid navbar-pagination navbar-pagination-bottom"
     data-ng-show="!modeImpression">
    <div>
        <form class="navbar-form navbar-center" role="search">
            <div class="form-group col-md-4 col-md-offset-2">
                <div class="input-group">
                    <div class="input-group-addon">Aller à la page:</div>
                    <input id='numeroPage' type="number" min="0" max="{{content.length}}" class="form-control"
                           placeholder="Numéro.." data-ng-model="numeroPageRechercher" required=""> <span
                        class="input-group-btn">
						<button class="btn btn-default" type="button" title="Ouvrir la page"
                                data-ng-click="setPage(numeroPageRechercher)">OK</button>
					</span>
                </div>
            </div>
        </form>
        <ul class="pagination pagination-md col-md-2">
            <li data-ng-class="{'disabled': currentPage <= 1}">
                <a data-ng-click="premier()" title="Premier">
                    <i class="fa fa-fast-backward" aria-hidden="true"></i>
                </a>
            </li>
            <li data-ng-class="{'disabled': currentPage <= 1}">
                <a data-ng-click="precedent()" title="Précedent">
                    <i class="fa fa-step-backward" aria-hidden="true"></i>
                </a>
            </li>
            <li data-ng-class="{'disabled': currentPage >= (content.length - 1)}">
                <a data-ng-click="suivant()" title="Suivant">
                    <i class="fa fa-step-forward" aria-hidden="true"></i>
                </a>
            </li>
            <li data-ng-class="{'disabled': currentPage >= (content.length - 1)}">
                <a data-ng-click="dernier()" title="Dernier">
                    <i class="fa fa-fast-forward" aria-hidden="true"></i>
                </a>
            </li>
        </ul>

        <p data-ng-if="content.length > 0" class="pagination-number col-md-2"> {{currentPage}} / {{(content.length -
            1)}}</p>
    </div>
</nav>


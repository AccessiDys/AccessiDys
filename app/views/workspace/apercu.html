<div class="doc-apercu" body-classes="" >

<div class="modal fade" id="duplicateDocModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false" >
  <div class="modal-dialog" id="modalContent">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" ng-click="" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Dupliquer le document</h4>
      </div>
      <div ng-show="showMsgSuccess" class="alert alert-success" ng-bind-html="msgSuccess">
      </div>
      <div class="modal-body adjust-modal-body">
        <div class="row-fluid span6">
          <div class="tab-content">
            <div class="tab-pane active" id="document" ng-form="AjoutformValidation" >
              <form class="form-horizontal" role="form" id="duplicateDoc" name="duplicateDoc">
                <fieldset>
                  <p class="controls_zone" ng-show="!showMsgSuccess">
                    Vous n'etes pas le proporietaire de ce document, voulez-vous le dupliquer dans votre Dropbox?
                  </p>
                </fieldset>
                <div class="centering" id="ProfileButtons" ng-show="!showMsgSuccess">
                  <button type="button" class="reset_btn" ng-click="" data-dismiss="modal">Annuler</button>
                  <button type="button" class="grey_btn normal_padding" ng-click="dupliquerDocument()" data-dismiss="modal">Oui</button>
                </div>
                <div class="centering" id="ProfileButtons" ng-show="showMsgSuccess">
                  <button type="button" class="reset_btn" ng-click="" data-dismiss="modal">Ok</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>

  <div class="plan-controls">
      <!-- <a ng-click="showApercu = false" href>
        <i class="fa fa-arrow-circle-left"/> Revenir au Plan
      </a>|  -->
      <a href="" ng-click="printDocument()">
        <i class="fa fa-print"/> Imprimer le document
      </a>
  </div>

  <div ng-repeat="blocks in blocksPlan" >
    <div ng-repeat="block in blocks" class="slides-botstraps">
        <p data-id="{{block.id}}" regle-style="block.text" style="width:600px;text-align:left;"></p>
    </div>
  </div>

  <div>
    <carousel interval="myInterval" class="slider">
      <div class="fixed_menu">
        <div class="menu_wrapper">
          <button ng-click="afficherMenu()" type="button" class="open_menu"></button>
          <ul>
            <li>
                <a href class="glyphicon glyphicon-home" ng-click="plan()"> Plan </a>
            </li>
            <li>
                <a href class="glyphicon glyphicon-fast-backward" ng-click="premier()"> Premier </a>
            </li>
            <li>
                <a href class="glyphicon glyphicon-fast-forward" ng-click="dernier()"> Dernier </a>
            </li>
            <li>
                <a href class="glyphicon glyphicon-forward" ng-click="suivant()"> Suivant </a>
            </li>
            <li>
                <a href class="glyphicon glyphicon-backward" ng-click="precedent()"> Pr√©cedent </a>
            </li>
            <li ng-show="showDuplDocModal">
                <a href class="glyphicon glyphicon-upload" data-toggle="modal" data-target="#duplicateDocModal"> Copier </a>
            </li>
            <li ng-show="showRestDocModal">
                <a href class="glyphicon glyphicon-edit" ng-click="restructurer()"> Restructurer </a>
            </li>
          </ul>
        </div>
      </div>

      <slide ng-repeat="blocks in blocksPlan" class="slides-botstraps" active="blocks.active">
        <div ng-switch on="$index">
            <div id="plan" style="min-height:500px" ng-switch-when="0">
              <h2>Plan</h2>
              <ul class="plan">
                  <li ng-repeat="plan in plans">
                    <a ng-click="setActive(plan.position, plan.block)" regle-style="plan.style" style="display:block" href> {{plan.libelle}} </a>
                  </li>
              </ul>
            </div>
            <div ng-switch-default>
              <div ng-repeat="slide in blocks" ng-show="slide.leaf || slide.root">
                <img ng-show="!slide.text" ng-src="{{slide.originalSource || slide.source}}" style="margin:auto;">
                <div id="{{slide.id}}" class="carousel-caption">
                  <div class="text-slides" data-id="{{slide.id}}"></div>
                  <button ng-show="slide.synthese" ng-click="playSong(slide.synthese)">Ecoutez</button>
                  <!-- <audio data-ng-init="initPlayerAudio()" preload="auto">
                    <source type="audio/mp3" ng-src="{{slide.synthese}}"></source>
                  </audio> -->
                </div>
              </div>    
            </div>
        </div>
      </slide>
      <!-- <audio id="player" src="" data-ng-init="initPlayerAudio()" preload="auto"></audio> -->
      <audio id="player" src="" preload="auto"></audio>
    </carousel>
  </div>
</div>

<div class="loader" ng-show="loader"></div>
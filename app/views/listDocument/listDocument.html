<!-- 
 File: listDocument.html
 * Copyright (c) 2013-2016
 * Centre National d’Enseignement à Distance (Cned), Boulevard Nicephore Niepce, 86360 CHASSENEUIL-DU-POITOU, France
 * (direction-innovation@cned.fr)
 *
 * GNU Affero General Public License (AGPL) version 3.0 or later version
 *
 * This file is part of a program which is free software: you can
 * redistribute it and/or modify it under the terms of the
 * GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public
 * License along with this program.
 * If not, see <http://www.gnu.org/licenses/>.
 -->
<h1 id="titreListDocument" class="animated fadeInLeft" translate>Documents</h1>
<div class="content" id="global_container">
    <appcache-updated></appcache-updated>
    <div document-methodes="" class="doc-General">
        <div class="alert-block alert-success alert-dismissable" id="list-document-success-toaster">
            <i class="fa fa-check" aria-hidden="true"></i>

            <strong regle-style="toasterMsg"
                    apply-rules="forceToasterApdapt"
                    tags="listTagsByProfilToaster">
            </strong>
        </div>

        <div class="head_section">
            <input type="text" class="serach_field pull-left" data-ng-model="query"
                   placeholder="Recherche un document ..." data-ng-change="specificFilter()"/>
            <a href="#/addDocument" style="text-decoration: none; color: white;" role="button" id="add_documentbtn"
               data-ng-show="onlineStatus" type="button" class="grey_btn pull-right add_document" data-ng-click=""
               title="Ajouter un document">Ajouter un document</a>
        </div>
        <table data-ng-show="showList" id="listDocumentPage">
            <thead>
            <tr>
                <th>
                    <span class="cursor-pointer sort-column"
                          data-ng-click="sortType = 'filename'; sortReverse = !sortReverse">
                        TITRE
                        <i class="fa" aria-hidden="true" data-ng-if="sortType === 'filename'"
                           data-ng-class="{'fa-sort-asc': sortReverse, 'fa-sort-desc': !sortReverse}"></i>
                        <i class="fa fa-sort" aria-hidden="true" data-ng-if="sortType !== 'filename'"></i>
                    </span>
                </th>
                <th>
                    <span class="cursor-pointer sort-column"
                          data-ng-click="sortType = 'dateModification'; sortReverse = !sortReverse">
                        Date derniere modification
                        <i class="fa" aria-hidden="true" data-ng-if="sortType === 'dateModification'"
                           data-ng-class="{'fa-sort-asc': sortReverse, 'fa-sort-desc': !sortReverse}"></i>
                        <i class="fa fa-sort" aria-hidden="true" data-ng-if="sortType !== 'dateModification'"></i>
                    </span>
                </th>
                <th class="action_zone">action</th>
            </tr>
            </thead>
            <tbody>
            <tr data-ng-repeat="document in listDocument | orderBy:sortType:sortReverse" data-ng-show="document.showed">
                <td class="profil_desc">
                    <a href="#/apercu?idDocument={{document.filename}}&mode=page">
                        {{ document.filename }}
                    </a>
                </td>
                <td class="profil_desc centering">{{ document.dateModification | date: configuration.DATE_PATTERN}}</td>
                <td class="action_area centering" uib-dropdown>
                    <button id="document-actions" type="button" class="action_btn" uib-dropdown-toggle
                            data-show="{{document.filenameEncoded}}"
                            data-shown="false" name="document_action_btn">&nbsp;</button>
                    <ul class="action_list" uib-dropdown-menu aria-labelledby="document-actions">
                        <li class="show_item">
                            <a ng-href="#/apercu?idDocument={{document.filename}}&mode=page" id="show_document"
                               title="Afficher">
                                Afficher
                            </a>
                        </li>
                        <li data-ng-show="onlineStatus" class="setting_documentTitle">
                            <a id="edit_document"
                               data-toggle="modal"
                               data-target="#EditTitreModal"
                               data-ng-click="openModifieTitre(document)"
                               title="Modifier le titre">
                                Modifier le titre
                            </a>
                        </li>
                        <li data-ng-show="onlineStatus" class="restructer_item">
                            <a ng-href="#/addDocument?idDocument={{document.filename}}" id="restructurer_document"
                               title="Modifier">
                                Modifier
                            </a>
                        </li>
                        <li data-ng-show="onlineStatus" class="share_item">
                            <a id="share_document" title="Partager le document"
                               data-ng-click="shareDocument(document)">
                                Partager
                            </a>
                        </li>
                        <li data-ng-show="onlineStatus" class="removing_item">
                            <a id="delete_document"
                               data-ng-click="deleteDocument(document)" title="Supprimer">
                                Supprimer
                            </a>
                        </li>
                    </ul>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="modal fade" id="EditTitreModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" id="modalContent">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title" id="myModalLabel">ENTRER LE NOUVEAU TITRE</h3>
                </div>
                <div class="modal-body">
                    <form class="globalFieldStyle" role="form">
                        <fieldset>
                            <p class="control_group clearfix">
                            <div data-ng-show="afficheErreurModifier" class="alert alert-danger animated fadeInRight">Ce
                                nom existe déjà dans votre DropBox.
                            </div>
                            <div data-ng-show="videModifier" class="alert alert-danger animated fadeInRight">Ce champ et
                                obligatoire. Veuillez le remplir.
                            </div>
                            <div data-ng-show="specialCaracterModifier" class="alert alert-danger animated fadeInRight">
                                Veuillez ne pas utiliser les caractères spéciaux.
                            </div>
                            <label for="inputEmail3" class="control-label without_icn">Nouveau Titre : </label>
                            <input type="text" type="text" max-length="200" data-ng-model="nouveauTitre"
                                   id="inputEmail3" placeholder="Entrer un nouveau titre">
                            </p>
                        </fieldset>
                        <div class="centering" id="ProfileButtons">
                            <button id="reset_titleediting" type="button" class="reset_btn" data-dismiss="modal"
                                    title="Annuler">Annuler
                            </button>
                            <button id="save_editedTitle" type="button" class="btn_simple light_blue"
                                    data-ng-click="modifieTitre()" title="Renommer">Renommer
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


